---
title: RedisLockRegistry的介绍及源码详解
date: 2024-04-02
tag: 
  - Java
---
# RedisLockRegistry的介绍及源码详解
## 1. 分布式锁理论介绍
### 1.1 什么是分布式锁？
何为分布式锁，为什么需要分布式锁？在解答这个问题之前，需要先介绍本地锁的概念。Java提供了synchronized关键字和juc中的Lock锁，这两者都是本地锁。本地锁指的是，该锁只针对当前虚拟机有效，也就是当你部署运行了一个Java项目A并且获取锁时，新起另一个Java项目，同样还可以获取锁，这两个锁之间没有任何关系。这便属于本地锁。因此，当你的服务只需要部署一个节点时，那么只需要用到本地锁即可。当你的系统需要支撑高并发、高性能等特性而去部署多节点时，本地锁便不够用了。本地锁无法解决多节点之间的资源竞争问题。因此，便需要用到分布式锁。在分布式锁中，当一个节点获取到锁后，其余节点在该锁被释放前均不可以获取锁。
如何实现分布式锁？分布式锁没有那么玄乎，其实就是将资源竞争条件从单个节点中拎出来，放到一个公共的、各节点均可以访问到的地方，各节点都共同去争抢这个锁。这样，大家就都能看到这个锁的争抢情况，自然可以进行锁的调度管控。
### 1.2 分布式锁理论的简单图示
如下图所示，一开始，三个节点共同去争抢一把锁
![图1](http://zzk31.320.io//img/20240403095528.png)
接着，节点A率先抢到了这个锁
![图2](http://zzk31.320.io/img/20240403095923.png)
在节点A执行完锁内操作后，释放了这把锁，另外两个节点继续争抢该锁
![](http://zzk31.320.io/img/20240403100024.png)

## 2. RedisLockRegistry的基本使用
Spring提供了一套分布式锁的解决方案———RedisLockRegistry
### 2.1 简单入门使用
### 2.2 工具封装

## 3. 源码详解
### 3.1 


## 4. 参考文章
- https://juejin.cn/post/6924573058674098184
- https://juejin.cn/post/6844904041185558536?searchId=20240402230806574C1E91E47F3A2F6C0A